{% load static %}
<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro - LARM</title>
    <link rel="stylesheet" href="{% static 'core/css/style.css' %}">
</head>

<body>

    <!-- Navbar -->
    <div class="navbar">
        <div><strong><a href="/" style="color: white; text-decoration: none;">LARM</a></strong></div>
        <div><a href="{% url 'login' %}" style="color: white; text-decoration: none;">Login</a></div>
    </div>

    <!-- Conteúdo -->
    <div class="container">
        <h2>Cadastro</h2>
        <p>Qual será seu vínculo com o LARM:</p>

        <form id="cadastroForm" method="POST" action="{% url 'cadastrar_usuario' %}">
            {% csrf_token %}
            <select name="tipo_usuario" id="tipo_usuario" required>
                <option value="">Selecione</option>
                <option value="aluno">Aluno</option>
                <option value="servidor">Técnico</option>
                <option value="professor">Professor</option>
                <option value="externo">Externo</option>
            </select>

            <input type="text" name="nome" placeholder="Nome Completo" required>
            <input type="email" name="email" placeholder="Email" required>
            <input type="text" name="telefone" placeholder="Telefone" required>

            <!-- Campos que aparecem dinamicamente -->
            <div id="camposExtras"></div>

            <button type="submit">Finalizar Cadastro</button>
        </form>
    </div>

    <script>
        document.getElementById("tipo_usuario").addEventListener("change", function () {
            let tipo = this.value;
            let camposExtras = document.getElementById("camposExtras");
            camposExtras.innerHTML = "";

            if (tipo === "aluno") {
                camposExtras.innerHTML = `
                    <input type="text" name="matricula" placeholder="Matrícula" required>
                    <input type="text" name="curso" placeholder="Curso" required>
                `;
            } else if (tipo === "servidor" || tipo === "professor") {
                camposExtras.innerHTML = `<input type="text" name="siape" placeholder="SIAPE" required>`;
                if (tipo === "professor") {
                    camposExtras.innerHTML += `<input type="text" name="departamento" placeholder="Departamento" required>`;
                }
            }
        });
    </script>

    {% include 'footer.html' %}

</body>

</html>
